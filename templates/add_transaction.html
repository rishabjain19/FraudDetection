{% extends "base.html" %} {% block title %}Add Transaction - Fraud Detection
System{% endblock %} {% block content %}
<div class="container">
  <div class="card">
    <h1> Add New Transaction</h1>
    <p class="form-description">
      Fill in the details below to record a new banking transaction. Fraud
      detection will run automatically.
    </p>

    <form
      method="POST"
      action="{{ url_for('add_transaction') }}"
      class="transaction-form"
    >
      <div class="form-group">
        <label for="transaction_id"
          >Transaction ID <span class="required">*</span></label
        >
        <input
          type="text"
          id="transaction_id"
          name="transaction_id"
          required
          placeholder="e.g., TXN001"
          pattern="[A-Za-z0-9]+"
          title="Alphanumeric characters only"
        />
      </div>

      <div class="form-group">
        <label for="user_id">User ID <span class="required">*</span></label>
        <input
          type="text"
          id="user_id"
          name="user_id"
          required
          placeholder="e.g., USER001"
        />
      </div>

      <div class="form-group">
        <label for="amount">Amount (â‚¹) <span class="required">*</span></label>
        <input
          type="number"
          id="amount"
          name="amount"
          required
          step="0.01"
          min="0.01"
          placeholder="e.g., 5000.00"
        />
      </div>

      <div class="form-group">
        <label for="location">Location <span class="required">*</span></label>
        <input
          type="text"
          id="location"
          name="location"
          required
          placeholder="e.g., Delhi, Mumbai"
        />
      </div>

      <div class="form-group">
        <label for="txn_time"
          >Transaction Time <span class="required">*</span></label
        >
        <input type="datetime-local" id="txn_time" name="txn_time" required />
        <small>Current time is auto-filled, but you can modify it</small>
      </div>

      <div class="form-group">
        <label for="txn_type"
          >Transaction Type <span class="required">*</span></label
        >
        <select id="txn_type" name="txn_type" required>
          <option value="">Select Type</option>
          <option value="Credit">Credit</option>
          <option value="Debit">Debit</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Add Transaction</button>
        <a href="{{ url_for('view_transactions') }}" class="btn btn-secondary"
          >Cancel</a
        >
      </div>
    </form>
  </div>
</div>

<script>
  // Auto-fill current time if not provided
  document.addEventListener("DOMContentLoaded", function () {
    const timeInput = document.getElementById("txn_time");
    if (!timeInput.value) {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, "0");
      const day = String(now.getDate()).padStart(2, "0");
      const hours = String(now.getHours()).padStart(2, "0");
      const minutes = String(now.getMinutes()).padStart(2, "0");
      timeInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
    }
  });
</script>
{% endblock %}
